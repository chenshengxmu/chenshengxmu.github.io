---
layout: post
title: JailbreakMe 3.0 Will Have Much Faster Install Time
---
![img](http://media.idownloadblog.com/wp-content/uploads/2011/06/Cydia-Preparing-FileSystem.png)
* Comex, the creator of the userland jailbreak known as JailbreakMe, has developed a method for a much faster install time in his upcoming jailbreak. He has managed to get rid of Cydia’s “Reorganizing Filesystem” message by abandoning the current ‘stashing’ filesystem approach.
* The advancements made in Comex’s jailbreak are expected to drastically reduce the time it takes to actually jailbreak an iDevice.
* Comex tweeted a long, technical explanation of his new method. He uses unionfs to merge files in directories during the jailbreak process.
* “If you don’t know, the stashing approach jailbreaks have been using for years– Cydia’s “Reorganizing Filesystem”– involves moving some large directories from the small / partition into the large /var partition, then creating symlinks from the original to the new location. This both ensures that any additional stuff put in those directories by packages will end up in the /var partition, and frees up space on the / partition for files created outside of those directories. However, the process has some issues, like taking forever to do when you jailbreak (I am a bit fanatical about speed), pretty much requiring the jailbreak to reboot the system to ensure there aren’t any running applications pointing to the old files (ditto about speed, I want a jailbreak to not even require a respring, as in star, but since star used stashing, some obscure things could cause issues before a reboot), and seriously confusing the sandbox code in the kernel (because each application has a sandbox with a list of allowed filenames, but after the symlink has moved files, the filenames no longer match), requiring that code to be patched (it needs to be patched anyway these days because tweaks have to run under the sandboxes of the applications they’re hooking, but depend on accessing various directories; but it still feels good to get rid of a kludge).
* With unionfs (which was saurik’s idea originally), new files are created in the /var partition, and merged with files in the corresponding directories in the / partition, so no files need to be moved, no descriptors are invalidated, and I think the sandbox code won’t notice what happened. It also opens the door for upgrading the base operating system without destroying the jailbreak files (although maybe iOS 5 delta updates will already allow this? I haven’t looked at them yet).
* I’ve wanted to do this since literally a year ago (that’s the date of the nullfs checkin, since I was dumb and thought I wanted that instead of unionfs), but I never got around to making it work properly.
* So, I just hope that I can get rid of the crashes my meddling with unionfs’s code have introduced, and fix it for the iPad 2 (my dumped copies of iPad 2 kernels do not include symbols; I wrote a small BinDiff-like tool to copy over symbols from a kernel for another device, but it’s not perfect) and that there aren’t any performance issues.”
* We’re still holding out that “Sunday is Funday,” so we’ll let you know if Comex’s jailbreak drops today. We expect JailbreakMe 3.0 to go live this week.
* [Blogsdna]

